[gcode_macro PRIME_BLOB]
description: Prime Blob, Poop to clean nozzle tip. 
gcode:
  SAVE_GCODE_STATE NAME=prime_blob_state
  M117 Priming nozzle with prime blob..
  RESPOND MSG="Priming nozzle with prime blob.."

  G90            # Absolute positioning
  M83            # Relative extrusion
  G1 X{printer.toolhead.axis_minimum.x + 5} Y{printer.toolhead.axis_minimum.y + 10} F10000
  G1 Z5.5 F3000  # move to blob position
  G1 F50 E30     # Extrude a blob
  M106 S128      # 50% fan
  G1 Z5 F100 E5  # Move the extruder up by 5mm while extruding, breaks away from blob

  G1 F400 Y{printer.toolhead.axis_minimum.y + 25} E1 
  G1 F400 Y{printer.toolhead.axis_minimum.y + 30} Z3.8  E0.5
  G1 F400 Y{printer.toolhead.axis_minimum.y + 35} Z2.6  E0.5
  G1 F400 Y{printer.toolhead.axis_minimum.y + 40} Z1.4  E0.5
  G1 F400 Y{printer.toolhead.axis_minimum.y + 45} Z0.25 E0.5

  M106 S0                                                     # 0% fan
  G1 F200 Y{printer.toolhead.axis_minimum.y +50} Z0.25 E0.6   # small wipe line
  G1 F300 Y{printer.toolhead.axis_minimum.y + 100}            # Break away wipe
  RESTORE_GCODE_STATE NAME=prime_blob_state